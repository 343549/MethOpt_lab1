# Задание №1. Разработка программного обеспечения для решения задачи линейного программирования

## Ф.И.О.

Джафари Хоссаин

## Поток

МЕТОПТ 1.2

## Краткое описание механизма работы программы

> В данной реализации для решения ЗЛП не используется симплекс-метод. Применяется метод перебора вершин (active-set/перебор базисов): рассматриваются возможные наборы активных ограничений, для каждого решается линейная система, кандидат проверяется на допустимость и выбирается лучший по целевой функции.

Если описывать кратко, то процесс работы программы по решению ЗЛП можно разбить на следующие этапы:

1. Программа получает на вход txt-файл с записью ЗЛП в соответствующем формате (сам формат будет подробнее разобран ниже).
2. Программа извлекает из txt-файла параметры ЗЛП, преобразуя их в удобный для обработки формат.
3. Приведение ограничений к стандартному виду: все `>=` умножаются на `-1` и становятся `<=`, равенства остаются в `A_eq`, неотрицательность `x >= 0` учитывается явно.
4. Формируется множество активных ограничений размера `n` (число переменных): все равенства плюс часть неравенств/границ `x_i = 0`. Для каждого набора решается линейная система, полученная из активных ограничений.
5. Найденная точка-кандидат проверяется на допустимость по всем ограничениям (с учетом допуска на численные ошибки).
6. Из всех допустимых кандидатов выбирается оптимальный по целевой функции (max или min).
7. При отсутствии допустимых вершин возвращается сообщение об отсутствии решения.

## Инструкция по запуску программы

> Для запуска программы требуется установленный интерпретатор `Python`.

Вся программа полностью реализована в рамках класса `SimplexMethod`, расположенного в файле `simplex_method.py`. Для работы программы требуется создать python-файл и в нём импортировать класс `SimplexMethod`:

```python
from simplex_method import SimplexMethod
```

Для работы с классом `SimplexMethod` нужно создать его экземпляр:

```python
sm = SimplexMethod()
```

В классе `SimplexMethod` для внешнего использования предназначены всего два метода:

- `SimplexMethod.load_problem(file_path: str) -> None)`: Метод для загрузки ЗЛП.
- `SimplexMethod.get_solution() -> list[list[int] | int])`: Метод для получения решения ЗЛП (перебор вершин, без симплекса).

Метод `load_problem` принимает на вход путь до txt-файла с ЗЛП, записанной в соответствующем формате:

```python
sm.load_problem('problem.txt')
```

ЗЛП в txt-файле должна быть представлена в специальном формате. Например, следующую ЗЛП:

<img width="1020" height="282" alt="1" src="https://github.com/user-attachments/assets/8edc8286-2049-4b3f-811b-136b74417969" />


нужно записать в txt-файле в следующем формате:

```
2x1 +3x2 +x3 +4x4 -> max
x1 +x2 +x3 +x4 <= 10
2x1 +x2 -x3 +x4 = 8
x2 +2x3 +x4 >= 5
```

> Для максимизации целевой функции нужно использовать параметр `max`, а для минимизации - `min`.

Стоит отметить, что программа способна распознавать несколько форматов ввода переменных. Например, следующие форматы ввода являются равнозначными:

```
+1x1 == 1x1 == +x1 == x1
-1x2 == -x2
+5x3 == 5x3
```

Таким образом, ЗЛП выше можно записать и так:

```
+2x1 +3x2 +1x3 +4x4 -> max
+1x1 +1x2 +1x3 +1x4 <= 10
+2x1 +1x2 -1x3 +1x4 = 8
+1x2 +2x3 +1x4 >= 5
```

Для получения решения заданной ЗЛП нужно воспользоваться методом `get_solution`:

```python
answer = sm.get_solution()
print(answer)
```

`get_solution` возвращает решение в формате `[[<Значения переменных x1, x2, x3, ... >], <Значение целевой функции>]`. Например, для ЗЛП выше `get_solution` вернёт следующие значения:

```
[[0, 0, 1, 9], 37]
```

где `x1 = 0`, `x2 = 0`, `x3 = 1`, `x4 = 9`, `F(x1, x2, x3, x4) = 37` - решение данного ЗЛП.

## Демонстрация работы программы

Для демонстрации работы программы возьмём ЗЛП из варианта №1 (номер моей позиции в потоке - 11, остаток от деления на 10 - 1) (данная ЗЛП уже была частично разобрана выше):

<img width="1020" height="282" alt="1" src="https://github.com/user-attachments/assets/61d9a3d2-4264-4046-a082-7569f1e3671b" />


Для начала запишем данную ЗЛП в txt-файл в соответствующем формате:

<img width="662" height="416" alt="2" src="https://github.com/user-attachments/assets/d77f52e4-28dc-4354-9ff7-5e5be04199a4" />


Далее создадим python-файл, где импортируем класс `SimplexMethod`, создадим его экземпляр, загрузим ЗЛП, получим и выведем ответ:

<img width="780" height="460" alt="3" src="https://github.com/user-attachments/assets/82686527-1309-44e3-a2bd-b8df4f193b2a" />


Теперь запустим данный python-файл и получим решение:

<img width="506" height="32" alt="4" src="https://github.com/user-attachments/assets/6eeaeb4a-b20b-431e-89a4-91f89ebc9f7e" />


Сравним полученное решение с решением, рассчитанном на [онлайн-калькуляторе](https://programforyou.ru/calculators/simplex-method):
<img width="886" height="414" alt="5" src="https://github.com/user-attachments/assets/05daf27c-7b18-4cde-a730-5ce781e69837" />


## Jupyter Notebook

В репозитории есть блокнот `report.ipynb` с разделами:

- Обзор и описание алгоритма (без симплекса, перебор вершин).
- Инструкция по запуску.
- Демонстрация решения `problem.txt`.
- Пакетный прогон примеров из `tests_txt`.

Откройте `report.ipynb` и выполните ячейки по порядку.

## Автотесты

Примеры входных данных находятся в каталоге `tests_txt/`. Для пакетной проверки можно использовать `pytest` (необязательно):

```bash
pytest -q
```

## Рефлективный вывод

Данная работа показалась мне довольно интересной и полезной. Выполняя её, я получил опыт реализации и тестирования относительно сложного и объёмного математического алгоритма на высокоуровневом языке программирования Python. Подобный опыт я считаю полезным и востребованным, так как программистам на практике иногда действительно приходится реализовывать те или иные математические алгоритмы для выполнения различных задач (причём эти алгоритмы зачастую могут быть довольно сложными). Так что развиваемые в рамках данной работы навыки, позволяющие разобраться с математическим алгоритмом, реализовывать его на языке программирования и протестировать получившуюся программу на корректность, я считаю полезными и востребованными (как в плане общего развития, так и в плане получения практических компетенций для будущей работы). Так что я считаю оправданным выдачу работ подобного типа студентам.

Лично я, при выполнении данной работы, столкнулся со следующими задачами:

- Мне нужно было выбрать подход, не использующий симплекс-метод, и реализовать перебор вершин.
- Придумать удобный как для человеческого восприятия, так и компьютерной обработки формат для ввода ЗЛП через txt-файл.
- Реализовать механизм считывания ЗЛП из txt-файла и преобразования её к удобному для компьютерной обработки виду.
- Реализовать базисный перебор/решение систем уравнений и проверку допустимости кандидатов.
- Протестировать получившуюся программу (вручную и с помощью написания автоматических тестов с использованием `pytest`), чтобы убедиться в корректности её работы и, при необходимости, найти причины ошибок и внести соответствующие исправления в код.

На мой взгляд, выполнение вышеописанных задач дало мне ценный опыт работы над подобным типом проектов, что может пригодиться мне в будущем.
